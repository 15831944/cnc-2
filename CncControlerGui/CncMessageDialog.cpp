#include <wx/window.h>
#include "CncMessageDialog.h"

/////////////////////////////////////////////////////////////////////
CncMessageDialog::CncMessageDialog(wxWindow* parent, const wxString& msg, wxString headline, wxString title) 
: CncMessageDialogBase(parent)
{
/////////////////////////////////////////////////////////////////////
	SetReturnCode(wxID_OK);
	
	setMessage(msg);
	setHeadline(headline);
	setTitle(title);
	
	m_btToggleWordWrap->SetValue(false) ;
	m_message->SetReadOnly(true);
}
/////////////////////////////////////////////////////////////////////
CncMessageDialog::~CncMessageDialog() {
/////////////////////////////////////////////////////////////////////
}
/////////////////////////////////////////////////////////////////////
void CncMessageDialog::setTitle(const wxString& t) {
/////////////////////////////////////////////////////////////////////
	if ( t.IsEmpty() )
		return;
		
	SetTitle(t);
}
/////////////////////////////////////////////////////////////////////
void CncMessageDialog::setHeadline(const wxString& hl) {
/////////////////////////////////////////////////////////////////////
	if ( hl.IsEmpty() ) {
		m_headline->SetLabel("Info:");
		return;
	}

	m_headline->SetLabel(wxString::Format("%s:", hl));
}
/////////////////////////////////////////////////////////////////////
void CncMessageDialog::setMessage(const wxString& msg) {
/////////////////////////////////////////////////////////////////////
	m_message->AppendText(msg);
}
/////////////////////////////////////////////////////////////////////
void CncMessageDialog::close(wxCommandEvent& event) {
/////////////////////////////////////////////////////////////////////
	Show(false);
}
/////////////////////////////////////////////////////////////////////
void CncMessageDialog::onWordWrap(wxCommandEvent& event) {
/////////////////////////////////////////////////////////////////////
	m_message->SetWrapMode(m_btToggleWordWrap->GetValue() == false ? wxSTC_WRAP_NONE : wxSTC_WRAP_WORD);
}
