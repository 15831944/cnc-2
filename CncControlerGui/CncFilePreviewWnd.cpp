#include <iostream>
#include <wx/filename.h>
#include "GlobalFunctions.h"
#include "CncFilePreviewWnd.h"

///////////////////////////////////////////////////////////////////
CncFilePreviewWnd::CncFilePreviewWnd(wxWindow* parent)
: CncFilePreviewWndBase(parent)
, preview(NULL)
///////////////////////////////////////////////////////////////////
{
	installContent();
	previewFile("about:blank", PT_SVG);
}
///////////////////////////////////////////////////////////////////
CncFilePreviewWnd::~CncFilePreviewWnd() {
///////////////////////////////////////////////////////////////////
}
///////////////////////////////////////////////////////////////////
void CncFilePreviewWnd::installContent() {
///////////////////////////////////////////////////////////////////
	preview = new CncFilePreview(this, "CncFilePreviewWnd");
	GblFunc::replaceControl(m_previewPlaceHolder, preview);
}
///////////////////////////////////////////////////////////////////
bool CncFilePreviewWnd::previewFile(const wxString& fileName, PreviewType pt) {
///////////////////////////////////////////////////////////////////
	wxFileName fn(fileName);
	if ( fn.Exists() == false ) {
		std::cerr << "CncFilePreviewWnd::previewFile: File: '" << fileName << "' doesn't exists!" << std::endl;
		return false;
	}
	
	m_previewFileName->SetValue(fileName);
	m_previewFileName->SetToolTip(fileName);
	
	return preview->selectPreview(fileName);
}
///////////////////////////////////////////////////////////////////
void CncFilePreviewWnd::onClose(wxCloseEvent& event) {
///////////////////////////////////////////////////////////////////
	Show(false);
}
